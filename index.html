<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ‡¶äººæ‡‰ç”¨åˆ†äº«</title>

    <style>
        body {
            margin: 0;
            font-family: "Poppins", "Noto Sans TC", sans-serif;
            background: radial-gradient(circle at top, #a06bff 0%, #3a1f57 40%, #140a23 100%);
            color: #ffffff;
            min-height: 100vh;
        }

        header {
            text-align: center;
            padding: 60px 20px 40px;
            position: relative;
        }

        header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            margin: 0;
            text-shadow: 0 0 15px rgba(255,255,255,0.5);
        }

        header p {
            margin-top: 10px;
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .apps-container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 20px;
        }

        .app-card {
            background: rgba(255,255,255,0.08);
            backdrop-filter: blur(6px);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(255,255,255,0.15);
            transition: 0.3s;
        }

        .app-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 0 25px rgba(255,255,255,0.3);
        }

        .app-title {
            font-size: 1.4rem;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .app-desc {
            font-size: 0.95rem;
            opacity: 0.85;
            line-height: 1.4rem;
        }

        .btn {
            display: inline-block;
            margin-top: 12px;
            padding: 8px 14px;
            border-radius: 10px;
            background: #b682ff;
            color: #1b003d;
            font-weight: 600;
            text-decoration: none;
            transition: 0.25s;
            cursor: pointer;
            border: none;
        }

        .btn:hover {
            background: #d5a7ff;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            opacity: 0.6;
            font-size: 0.9rem;
        }

        /* Login button */
        .login-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,0.5);
            background: rgba(10,0,40,0.6);
            color: #ffffff;
            cursor: pointer;
            backdrop-filter: blur(8px);
            transition: 0.25s;
        }

        .login-btn:hover {
            background: rgba(176,130,255,0.9);
            color: #1b003d;
        }

        /* User menu */
        .user-menu {
            position: absolute;
            top: 20px;
            right: 20px;
            display: none;
            text-align: right;
        }

        .user-menu-top {
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: flex-end;
        }

        .user-info-text {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            font-size: 0.8rem;
        }

        .user-info-text span {
            line-height: 1.2;
        }

        .user-info-text .user-name {
            font-weight: 600;
        }

        .user-info-text .user-tag {
            opacity: 0.8;
        }

        .user-menu-btn {
            padding: 2px;
            border-radius: 50%;
            border: 1px solid rgba(255,255,255,0.5);
            background: rgba(10,0,40,0.6);
            cursor: pointer;
            transition: 0.25s;
        }

        .user-menu-btn:hover {
            background: rgba(176,130,255,0.9);
        }

        .user-menu-btn img {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-menu-list {
            margin-top: 6px;
            background: rgba(15,5,45,0.95);
            border-radius: 12px;
            padding: 6px 0;
            box-shadow: 0 0 18px rgba(0,0,0,0.5);
            min-width: 140px;
            display: none;
        }

        .user-menu.open .user-menu-list {
            display: block;
        }

        .user-menu-item {
            width: 100%;
            padding: 8px 14px;
            background: transparent;
            border: none;
            text-align: left;
            color: #fff;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .user-menu-item:hover {
            background: rgba(182,130,255,0.2);
        }

        /* Login modal */
        .login-modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        .login-modal.open {
            display: flex;
        }

        .login-dialog {
            background: rgba(20,10,50,0.95);
            padding: 24px 22px 20px;
            border-radius: 18px;
            width: min(360px, 95vw);
            box-shadow: 0 0 25px rgba(0,0,0,0.4);
        }

        .login-dialog h2 {
            margin-bottom: 10px;
            margin-top: 0;
        }

        .login-dialog .login-hint {
            font-size: 0.82rem;
            opacity: 0.9;
            margin-bottom: 14px;
        }

        .login-dialog .login-hint b {
            font-weight: 700;
        }

        .login-dialog label {
            margin-bottom: 4px;
            font-size: 0.85rem;
            display: block;
        }

        /* â˜… ç‰ˆæœ¬ Cï¼šç¸®çŸ­ä½†é å·¦ï¼Œä¸å†ç½®ä¸­ â˜… */
        .login-dialog input {
            width: 80%;
            max-width: 260px;
            display: block;
            margin: 0 0 14px 0; /* å·¦å°é½Š */
            padding: 8px 10px;
            border-radius: 8px;
            border: none;
            font-size: 0.9rem;
        }

        .login-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
            margin-top: 6px;
        }

        .btn-close {
            background: transparent;
            border: none;
            color: #bbbbff;
            cursor: pointer;
            font-size: 0.85rem;
        }

        .btn-login {
            padding: 7px 14px;
            border-radius: 10px;
            border: none;
            background: #b682ff;
            color: #1b003d;
            font-weight: 600;
            cursor: pointer;
            transition: 0.25s;
        }

        .btn-login:hover {
            background: #d5a7ff;
        }

        @media (max-width: 480px) {
            header h1 {
                font-size: 2.2rem;
            }
            header p {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>

<header>
    <h1>æ‡¶äººæ‡‰ç”¨åˆ†äº«</h1>
    <p>æ”¾ä¸€äº›æˆ‘è‡ªå·±é–‹ç™¼çš„å°å·¥å…·ã€å°å°ˆæ¡ˆã€å°å¯¦é©—ç”¨é é¢</p>

    <!-- æœªç™»å…¥æ™‚é¡¯ç¤º -->
    <button class="login-btn" id="openLogin">ç™»å…¥</button>

    <!-- ç™»å…¥å¾Œé¡¯ç¤º -->
    <div class="user-menu" id="userMenu">
        <div class="user-menu-top">
            <div class="user-info-text">
                <span class="user-name" id="currentUserLabel"></span>
                <span class="user-tag">å·²ç™»å…¥</span>
            </div>
            <button class="user-menu-btn" id="userMenuBtn">
                <img id="userAvatar"
                     src="https://i.imgur.com/4Z8VZ5A.png"
                     alt="avatar">
            </button>
        </div>
        <div class="user-menu-list" id="userMenuList">
            <button class="user-menu-item" id="menuSettings">Setting</button>
            <button class="user-menu-item" id="menuSwitch">åˆ‡æ›å¸³è™Ÿ</button>
            <button class="user-menu-item" id="menuLogout">Log out</button>
        </div>
    </div>
</header>

<!-- ç™»å…¥è¦–çª— -->
<div class="login-modal" id="loginModal">
    <div class="login-dialog">
        <h2>æœƒå“¡ç™»å…¥</h2>
        <div class="login-hint">
            ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼šé è¨­å¸³è™Ÿ <b>admin</b> / å¯†ç¢¼ <b>1234</b><br>
            ä¹Ÿå¯ä»¥æŒ‰å·¦ä¸‹è§’ Sign å»ºç«‹æ–°å¸³è™Ÿã€‚
        </div>
        <label for="login-username">å¸³è™Ÿ</label>
        <input type="text" id="login-username" />
        <label for="login-password">å¯†ç¢¼</label>
        <input type="password" id="login-password" />
        <div class="login-actions">
            <button class="btn-close" id="closeLogin">Sign</button>
            <button class="btn-login">ç™»å…¥</button>
        </div>
    </div>
</div>

<section class="apps-container">
    <div class="app-card">
        <div class="app-title">ğŸŸ£ ç°¡æ˜“å¸³å¯†ç™»å…¥å·¥å…·</div>
        <div class="app-desc">
            ç°¡å–®å¸³è™Ÿå¯†ç¢¼ç™»å…¥å°å·¥å…·ï¼Œæ”¯æ´è‡ªå‹•è¼¸å…¥èˆ‡åŠ å¯†å„²å­˜ã€‚ä¸‹è¼‰å¾Œå¯ç›´æ¥åŸ·è¡Œä½¿ç”¨ã€‚
        </div>
        <a href="å¸³å¯†ç™»å…¥å·¥å…·7.0.exe" download class="btn">ç«‹å³ä¸‹è¼‰</a>
    </div>

    <div class="app-card">
        <div class="app-title">ğŸŸ£ æ‡‰ç”¨ç¨‹å¼ 2</div>
        <div class="app-desc">
            ä¾‹å¦‚ï¼šå¯†ç¢¼ç”¢ç”Ÿå™¨ã€è¨ˆç®—å°å·¥å…·ã€API æ¸¬è©¦å·¥å…·ç­‰ç­‰ï¼Œä¹‹å¾Œå¯ä»¥å†å¡«å…¥å¯¦éš›å…§å®¹ã€‚
        </div>
        <a href="#" class="btn">å‰å¾€ä½¿ç”¨</a>
    </div>

    <div class="app-card">
        <div class="app-title">ğŸŸ£ æ‡‰ç”¨ç¨‹å¼ 3</div>
        <div class="app-desc">
            ä¹‹å¾Œæƒ³æ–°å¢å¤šå°‘éƒ½å¯ä»¥ï¼Œå¡ç‰‡æœƒè‡ªå‹•æ’ç‰ˆï¼Œç‰ˆé¢æœƒä¿æŒæ•´é½Šã€‚
        </div>
        <a href="#" class="btn">å‰å¾€ä½¿ç”¨</a>
    </div>
</section>

<footer>
    Â© 2025 æˆ‘çš„æ‡‰ç”¨ç¨‹å¼ä½œå“é›†
</footer>

<script>
    const openLoginBtn = document.getElementById('openLogin');
    const loginModal = document.getElementById('loginModal');
    const closeLoginBtn = document.getElementById('closeLogin');
    const loginBtn = document.querySelector('.btn-login');
    const usernameInput = document.getElementById('login-username');
    const passwordInput = document.getElementById('login-password');
    const appButtons = document.querySelectorAll('.apps-container .btn');

    const userMenu = document.getElementById('userMenu');
    const userMenuBtn = document.getElementById('userMenuBtn');
    const userMenuList = document.getElementById('userMenuList');
    const menuLogout = document.getElementById('menuLogout');
    const menuSettings = document.getElementById('menuSettings');
    const menuSwitch = document.getElementById('menuSwitch');
    const userAvatar = document.getElementById('userAvatar');
    const currentUserLabel = document.getElementById('currentUserLabel');

    const VALID_DEFAULT_USERNAME = 'admin';
    const VALID_DEFAULT_PASSWORD = '1234';

    let currentUser = null;

    function setAppsEnabled(enabled) {
        appButtons.forEach(btn => {
            if (enabled) {
                if (btn.dataset.originalText) {
                    btn.textContent = btn.dataset.originalText;
                }
                btn.style.pointerEvents = 'auto';
                btn.style.opacity = '1';
            } else {
                if (!btn.dataset.originalText) {
                    btn.dataset.originalText = btn.textContent;
                }
                btn.textContent = 'è«‹å…ˆç™»å…¥';
                btn.style.pointerEvents = 'none';
                btn.style.opacity = '0.6';
            }
        });
    }

    function findUser(username) {
        const raw = localStorage.getItem('users');
        if (!raw) return null;
        try {
            const users = JSON.parse(raw);
            return users.find(u => u.username === username) || null;
        } catch {
            return null;
        }
    }

    function saveUser(user) {
        const raw = localStorage.getItem('users');
        let users = [];
        if (raw) {
            try {
                users = JSON.parse(raw);
                if (!Array.isArray(users)) users = [];
            } catch {
                users = [];
            }
        }
        const idx = users.findIndex(u => u.username === user.username);
        if (idx >= 0) {
            users[idx] = user;
        } else {
            users.push(user);
        }
        localStorage.setItem('users', JSON.stringify(users));
    }

    // è¼‰å…¥è‡ªè¨‚é ­åƒ
    const savedAvatar = localStorage.getItem('avatarDataUrl');
    if (savedAvatar && userAvatar) {
        userAvatar.src = savedAvatar;
    }

    function setLoggedInState(isLoggedIn, username) {
        if (isLoggedIn && username) {
            currentUser = username;
            localStorage.setItem('currentUser', username);
            localStorage.setItem('isLoggedIn', 'true');
            if (openLoginBtn) openLoginBtn.style.display = 'none';
            if (userMenu) userMenu.style.display = 'block';
            if (currentUserLabel) currentUserLabel.textContent = username;
            setAppsEnabled(true);
        } else {
            currentUser = null;
            localStorage.removeItem('currentUser');
            localStorage.setItem('isLoggedIn', 'false');
            if (openLoginBtn) {
                openLoginBtn.style.display = 'inline-block';
                openLoginBtn.disabled = false;
                openLoginBtn.style.opacity = '1';
                openLoginBtn.style.cursor = 'pointer';
            }
            if (userMenu) {
                userMenu.style.display = 'none';
                userMenu.classList.remove('open');
            }
            if (currentUserLabel) currentUserLabel.textContent = '';
            setAppsEnabled(false);
        }
    }

    // åˆå§‹åŒ–ç™»å…¥ç‹€æ…‹
    (function initLoginState() {
        const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
        const savedUser = localStorage.getItem('currentUser');
        if (isLoggedIn && savedUser) {
            setLoggedInState(true, savedUser);
        } else {
            setLoggedInState(false, null);
        }
    })();

    if (openLoginBtn && loginModal) {
        openLoginBtn.addEventListener('click', () => {
            loginModal.classList.add('open');
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                usernameInput.value = savedUser;
                passwordInput.value = '';
                passwordInput.focus();
            } else {
                usernameInput.value = '';
                passwordInput.value = '';
                usernameInput.focus();
            }
        });
    }

    if (closeLoginBtn && loginModal) {
    closeLoginBtn.addEventListener('click', () => {
        // é» Sign ç›´æ¥å‰å¾€è¨»å†Šé 
        window.location.href = 'create.html';
    });
}


    if (loginModal) {
        loginModal.addEventListener('click', (e) => {
            if (e.target === loginModal) {
                loginModal.classList.remove('open');
            }
        });
    }

    if (loginBtn) {
        loginBtn.addEventListener('click', () => {
            const user = usernameInput.value.trim();
            const pwd = passwordInput.value.trim();

            if (!user || !pwd) {
                alert('è«‹è¼¸å…¥å¸³è™Ÿèˆ‡å¯†ç¢¼');
                return;
            }

            if (user === VALID_DEFAULT_USERNAME && pwd === VALID_DEFAULT_PASSWORD) {
                setLoggedInState(true, user);
                loginModal.classList.remove('open');
                alert('ä½¿ç”¨é è¨­å¸³è™Ÿç™»å…¥æˆåŠŸï¼');
                return;
            }

            const found = findUser(user);
            if (!found) {
                alert('æ‰¾ä¸åˆ°æ­¤å¸³è™Ÿï¼Œè«‹ç¢ºèªæ˜¯å¦è¼¸å…¥æ­£ç¢ºæˆ–ä½¿ç”¨ Sign å»ºç«‹ã€‚');
                return;
            }
            if (found.password !== pwd) {
                alert('å¯†ç¢¼éŒ¯èª¤');
                return;
            }

            setLoggedInState(true, user);
            loginModal.classList.remove('open');
            alert(`æ­¡è¿å›ä¾†ï¼Œ${user}ï¼`);
        });
    }

    if (userMenuBtn && userMenu) {
        userMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            userMenu.classList.toggle('open');
        });
    }

    document.addEventListener('click', () => {
        if (userMenu) {
            userMenu.classList.remove('open');
        }
    });

    if (menuLogout) {
        menuLogout.addEventListener('click', () => {
            setLoggedInState(false, null);
            alert('å·²ç™»å‡º');
        });
    }

    if (menuSettings) {
        menuSettings.addEventListener('click', () => {
            window.location.href = 'settings.html';
        });
    }

    if (menuSwitch) {
        menuSwitch.addEventListener('click', () => {
            setLoggedInState(false, null);
            if (loginModal) loginModal.classList.add('open');
        });
    }
</script>

</body>
</html>
